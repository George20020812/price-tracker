# CHANGELOG

## Version 1.0.2 - 2025-09-17

### 改進 (Improvements)

-   **時間顯示精簡化**：商品追蹤列表和價格趨勢圖中的時間顯示現在只顯示月份和日期，提供更簡潔的介面。
-   **貼文連結精簡化**：商品詳情頁面的原始連結現在會精簡顯示，自動移除 `https://` 或 `http://` 前綴，並縮短顯示長度。

### 錯誤修正 (Bug Fixes)

-   **修正「無法啟動選擇模式」錯誤**：解決了在 `popup.js` 中嘗試向 `background.js` 或 `content_script.js` 發送訊息時，因接收端不存在而導致的連接錯誤。
    *   **原因**：服務工作者生命週期管理和內容腳本注入限制。
    *   **解決方案**：
        1.  **引入 Port 連接機制**：在 `popup.js` 和 `background.js` 之間建立持久連接，確保服務工作者在 `popup` 開啟期間保持活動。
        2.  **添加 URL 模式檢查**：在 `popup.js` 中，當嘗試啟動元素選擇器模式時，會先檢查當前頁面 URL 是否符合 Facebook Marketplace 商品詳情頁面的模式，並提供友善提示。

## Version 1.0.1 - 2025-09-16

### 新增功能 (New Features)

-   **自動化價格提取：** 擴充功能現在可以利用儲存的選擇器自動從商品頁面提取商品名稱和價格，大幅減少手動操作。

### 改進 (Improvements)

-   **介面視覺優化：** 彈出視窗介面經過重新設計，提供更現代、美觀且一致的使用者體驗。


## Version 1.0.0 - 2025-09-16

### 新增功能 (New Features)

-   **增強型瀏覽器插件 UI：** 插件介面全面升級，提供更直觀、精美的操作體驗。
-   **商品追蹤列表：** 在插件中直接查看所有已追蹤商品的列表。
-   **價格趨勢圖：** 為每個追蹤商品提供互動式歷史價格折線圖 (由 Chart.js 驅動)。
-   **商品詳情頁面：** 點擊列表中的商品可查看其詳細資訊，包括名稱、當前價格和原始連結。
-   **刪除商品功能：** 允許使用者從插件介面直接刪除不再追蹤的商品。
-   **元素選擇器模式：** 引入手動選擇網頁元素的功能，使用者可點擊頁面元素來指定商品名稱和價格的選擇器，解決網頁結構變動導致的擷取失敗問題。
-   **後端 API 擴充：**
    *   新增 `GET /api/items/<item_id>/history` 端點，用於獲取歷史價格資料。
    *   新增 `DELETE /api/items/<item_id>` 端點，用於刪除商品。
-   **資料庫初始化 CLI 指令：** 新增 `flask init-db` 指令，方便資料庫表格的建立。

### 改進 (Improvements)

-   **前端與後端 Port 統一：** 修正了前端與後端 Port 不一致的問題 (統一為 5001)。
-   **前端 API 呼叫修正：** 修正了 `popup.js` 中 API 路徑和 JSON 欄位名稱的錯誤。
-   **後端 `createdAt` 格式化：** `GET /api/items` 回傳的 `createdAt` 欄位現在以 ISO 格式提供。
-   **批次檔優化：** `start_backend.bat` 現在會自動指定 Port 5001 啟動 Flask 服務。
-   **訊息提示優化：** 插件介面現在會顯示更清晰的操作訊息和錯誤提示。

### 錯誤修正 (Bug Fixes)

-   修正了 `manifest.json` 中 `host_permissions` Port 不正確的問題。
-   修正了 `app.py` 中 `db.create_all()` 未被執行的問題，確保資料庫表格能被正確建立。